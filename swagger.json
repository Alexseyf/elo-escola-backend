{
    "openapi": "3.0.0",
    "info": {
        "title": "API Escolar",
        "description": "API para sistema de gerenciamento escolar multi-tenant. Permite cadastro de usuários, alunos, turmas, diários, eventos, entre outros. O contexto do tenant é definido pelo header 'x-tenant-id'.",
        "termsOfService": "http://swagger.io/terms/",
        "contact": {
            "email": "alexseyf66@gmail.com"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "http://localhost:3000",
            "description": "Servidor Local"
        }
    ],
    "tags": [
        { "name": "Autenticação", "description": "Endpoints de login e recuperação de senha" },
        { "name": "Plataforma", "description": "Endpoints administrativos globais (Platform Admin)" },
        { "name": "Usuarios", "description": "Gerenciamento de usuários da escola" },
        { "name": "Alunos", "description": "Gerenciamento de alunos" },
        { "name": "Turmas", "description": "Gerenciamento de turmas" },
        { "name": "Professores", "description": "Operações específicas para professores" },
        { "name": "Responsaveis", "description": "Operações específicas para responsáveis" },
        { "name": "Diarios", "description": "Registro e consulta de diários de classe" },
        { "name": "Eventos", "description": "Gerenciamento de eventos escolares" },
        { "name": "Cronogramas", "description": "Gerenciamento de cronogramas/rotinas" },
        { "name": "Atividades", "description": "Atividades pedagógicas" },
        { "name": "Objetivos", "description": "Objetivos de aprendizagem" },
        { "name": "Grupos", "description": "Grupos por campo de experiência" },
        { "name": "Campos", "description": "Campos de experiência" }
    ],
    "paths": {
        "/login": {
            "post": {
                "tags": ["Autenticação"],
                "summary": "Login de usuário (Tenant)",
                "description": "Autentica um usuário de uma escola específica.",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "email": { "type": "string" },
                                    "senha": { "type": "string" }
                                },
                                "required": ["email", "senha"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": { "description": "Login realizado", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/LoginResponse" } } } },
                    "400": { "description": "Dados inválidos" },
                    "401": { "description": "Credenciais inválidas" }
                }
            }
        },
        "/recupera-senha": {
            "post": {
                "tags": ["Autenticação"],
                "summary": "Solicitar recuperação de senha",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": { "email": { "type": "string" } },
                                "required": ["email"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": { "description": "Email enviado" },
                    "400": { "description": "Erro na solicitação" }
                }
            }
        },
        "/valida-senha": {
            "post": {
                "tags": ["Autenticação"],
                "summary": "Validar código e trocar senha",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "email": { "type": "string" },
                                    "code": { "type": "string" },
                                    "novaSenha": { "type": "string" }
                                },
                                "required": ["email", "code", "novaSenha"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": { "description": "Senha alterada com sucesso" },
                    "400": { "description": "Token inválido ou dados incorretos" }
                }
            }
        },
        "/api/v1/platform/login": {
            "post": {
                "tags": ["Plataforma"],
                "summary": "Login de Administrador da Plataforma",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": {
                                    "email": { "type": "string" },
                                    "senha": { "type": "string" }
                                },
                                "required": ["email", "senha"]
                            }
                        }
                    }
                },
                "responses": {
                    "200": { "description": "Login realizado" },
                    "401": { "description": "Não autorizado" }
                }
            }
        },
        "/api/v1/schools": {
            "post": {
                "tags": ["Plataforma"],
                "summary": "Criar nova escola (Tenant)",
                "description": "Cria uma nova escola e o usuário administrador inicial.",
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": { "$ref": "#/components/schemas/CreateSchoolInput" }
                        }
                    }
                },
                "responses": {
                    "201": { "description": "Escola criada com sucesso" },
                    "400": { "description": "Dados inválidos" },
                    "409": { "description": "Slug ou CNPJ já existe" },
                    "403": { "description": "Acesso negado" }
                }
            }
        },
        "/api/v1/platform/schools": {
            "get": {
                "tags": ["Plataforma"],
                "summary": "Listar todas as escolas",
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": { "description": "Lista de escolas" },
                    "403": { "description": "Acesso negado (Requer PLATFORM_ADMIN)" }
                }
            }
        },
        "/api/v1/platform/users": {
            "get": {
                "tags": ["Plataforma"],
                "summary": "Listar todos os usuários da plataforma",
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": { "description": "Lista de usuários" },
                    "403": { "description": "Acesso negado" }
                }
            }
        },
        "/api/v1/platform/metrics": {
            "get": {
                "tags": ["Plataforma"],
                "summary": "Obter métricas globais",
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": { "description": "Métricas obtidas" },
                    "403": { "description": "Acesso negado" }
                }
            }
        },
        "/usuarios": {
            "get": {
                "tags": ["Usuarios"],
                "summary": "Listar usuários",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": { "description": "Lista de usuários" }
                }
            },
            "post": {
                "tags": ["Usuarios"],
                "summary": "Criar usuário",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": { "$ref": "#/components/schemas/UsuarioInput" }
                        }
                    }
                },
                "responses": {
                    "201": { "description": "Usuário criado" },
                    "400": { "description": "Erro de validação" },
                    "409": { "description": "Email já registrado" }
                }
            }
        },
        "/usuarios/usuario-logado": {
            "get": {
                "tags": ["Usuarios"],
                "summary": "Obter dados do usuário logado",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": { "description": "Dados do usuário" },
                    "404": { "description": "Usuário não encontrado" }
                }
            }
        },
        "/usuarios/{usuarioId}": {
            "get": {
                "tags": ["Usuarios"],
                "summary": "Obter usuário por ID",
                "parameters": [
                    { "name": "usuarioId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": { "description": "Dados do usuário" },
                    "404": { "description": "Usuário não encontrado" }
                }
            }
        },
        "/alunos": {
            "get": {
                "tags": ["Alunos"],
                "summary": "Listar alunos",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": { "description": "Lista de alunos" }
                }
            },
            "post": {
                "tags": ["Alunos"],
                "summary": "Criar aluno",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "content": {
                        "application/json": { "schema": { "$ref": "#/components/schemas/AlunoInput" } }
                    }
                },
                "responses": {
                    "201": { "description": "Aluno criado" },
                    "400": { "description": "Dados inválidos" }
                }
            }
        },
        "/alunos/ativos": {
            "get": {
                "tags": ["Alunos"],
                "summary": "Listar alunos ativos",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": { "description": "Lista de alunos ativos" }
                }
            }
        },
        "/alunos/{id}": {
            "get": {
                "tags": ["Alunos"],
                "summary": "Obter aluno por ID",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": {
                    "200": { "description": "Dados do aluno" },
                    "404": { "description": "Aluno não encontrado" }
                }
            },
            "put": {
                "tags": ["Alunos"],
                "summary": "Atualizar aluno (Completo)",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "content": { "application/json": { "schema": { "$ref": "#/components/schemas/AlunoInput" } } }
                },
                "responses": { "200": { "description": "Aluno atualizado" } }
            },
            "patch": {
                "tags": ["Alunos"],
                "summary": "Atualizar aluno (Parcial)",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "content": { "application/json": { "schema": { "$ref": "#/components/schemas/AlunoInput" } } }
                },
                "responses": { "200": { "description": "Aluno atualizado" } }
            }
        },
        "/alunos/soft/{id}": {
            "delete": {
                "tags": ["Alunos"],
                "summary": "Desativar aluno (Soft Delete)",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Aluno desativado" } }
            }
        },
        "/alunos/{usuarioId}/responsavel": {
            "post": {
                "tags": ["Alunos"],
                "summary": "Adicionar responsável ao aluno",
                "parameters": [
                    { "name": "usuarioId", "in": "path", "description": "ID do usuário responsável", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "object",
                                "properties": { "alunoId": { "type": "integer" } },
                                "required": ["alunoId"]
                            }
                        }
                    }
                },
                "responses": { "201": { "description": "Vínculo criado" } }
            }
        },
        "/alunos/{alunoId}/responsavel/{usuarioId}": {
            "delete": {
                "tags": ["Alunos"],
                "summary": "Remover responsável do aluno",
                "parameters": [
                    { "name": "alunoId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "name": "usuarioId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Responsável removido" } }
            }
        },
        "/alunos/relatorios/mensalidades-por-turma": {
            "get": {
                "tags": ["Alunos"],
                "summary": "Relatório de mensalidades por turma",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Relatório gerado" } }
            }
        },
        "/alunos/{alunoId}/possui-registro-diario": {
            "get": {
                "tags": ["Alunos"],
                "summary": "Verificar se aluno possui diário na data",
                "parameters": [
                    { "name": "alunoId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "name": "data", "in": "query", "schema": { "type": "string", "format": "date" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Status verificado" } }
            }
        },
        "/turmas": {
            "get": {
                "tags": ["Turmas"],
                "summary": "Listar turmas",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista de turmas" } }
            },
            "post": {
                "tags": ["Turmas"],
                "summary": "Criar turma",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "content": { "application/json": { "schema": { "type": "object", "properties": { "nome": { "type": "string" } } } } }
                },
                "responses": { "201": { "description": "Turma criada" } }
            }
        },
        "/turmas/totalAlunosTurma": {
            "get": {
                "tags": ["Turmas"],
                "summary": "Total de alunos por turma",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Totais obtidos" } }
            }
        },
        "/turmas/{usuarioId}/professor": {
            "post": {
                "tags": ["Turmas"],
                "summary": "Adicionar professor à turma",
                "parameters": [
                    { "name": "usuarioId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "content": { "application/json": { "schema": { "type": "object", "properties": { "turmaId": { "type": "integer" } }, "required": ["turmaId"] } } }
                },
                "responses": { "201": { "description": "Professor vinculado" } }
            }
        },
        "/turmas/{turmaId}/alunos": {
            "get": {
                "tags": ["Turmas"],
                "summary": "Listar alunos da turma",
                "parameters": [
                    { "name": "turmaId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista de alunos" } }
            }
        },
        "/professores/{professorId}/turmas": {
            "get": {
                "tags": ["Professores"],
                "summary": "Turmas de um professor",
                "parameters": [
                    { "name": "professorId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista de turmas" } }
            }
        },
        "/professores/professor-turma": {
            "get": {
                "tags": ["Professores"],
                "summary": "Lista professores e suas turmas",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista obtida" } }
            }
        },
        "/professores/{professorId}/turma/{turmaId}": {
            "delete": {
                "tags": ["Professores"],
                "summary": "Desvincular professor de turma",
                "parameters": [
                    { "name": "professorId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "name": "turmaId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Desvinculado com sucesso" } }
            }
        },
        "/responsaveis/{responsavelId}/alunos": {
            "get": {
                "tags": ["Responsaveis"],
                "summary": "Alunos de um responsável",
                "parameters": [
                    { "name": "responsavelId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista de alunos" } }
            }
        },
        "/responsaveis/meus-alunos": {
            "get": {
                "tags": ["Responsaveis"],
                "summary": "Alunos do responsável logado",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista de alunos" } }
            }
        },
        "/diarios": {
            "post": {
                "tags": ["Diarios"],
                "summary": "Criar entrada no diário",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "requestBody": {
                    "content": { "application/json": { "schema": { "type": "object" } } }
                },
                "responses": { "201": { "description": "Diário criado" } }
            }
        },
        "/diarios/aluno/{alunoId}": {
            "get": {
                "tags": ["Diarios"],
                "summary": "Diários de um aluno",
                "parameters": [
                    { "name": "alunoId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista de diários" } }
            }
        },
        "/diarios/{id}": {
            "get": {
                "tags": ["Diarios"],
                "summary": "Obter diário por ID",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Dados do diário" } }
            },
            "put": {
                "tags": ["Diarios"],
                "summary": "Atualizar diário",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "requestBody": { "content": { "application/json": { "schema": { "type": "object" } } } },
                "responses": { "200": { "description": "Atualizado" } }
            },
            "patch": {
                "tags": ["Diarios"],
                "summary": "Atualizar diário (Parcial)",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "requestBody": { "content": { "application/json": { "schema": { "type": "object" } } } },
                "responses": { "200": { "description": "Atualizado" } }
            }
        },
        "/eventos": {
            "get": {
                "tags": ["Eventos"],
                "summary": "Listar eventos",
                "parameters": [
                    { "name": "data", "in": "query", "schema": { "type": "string", "format": "date" } },
                    { "name": "tipoEvento", "in": "query", "schema": { "type": "string" } },
                    { "name": "turmaId", "in": "query", "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista de eventos" } }
            },
            "post": {
                "tags": ["Eventos"],
                "summary": "Criar evento",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "requestBody": { "content": { "application/json": { "schema": { "type": "object" } } } },
                "responses": { "201": { "description": "Evento criado" } }
            }
        },
        "/eventos/turma/{turmaId}": {
            "get": {
                "tags": ["Eventos"],
                "summary": "Listar eventos da turma",
                "parameters": [
                    { "name": "turmaId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista de eventos" } }
            }
        },
        "/eventos/{id}": {
            "get": {
                "tags": ["Eventos"],
                "summary": "Evento por ID",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Dados do evento" } }
            },
            "put": {
                "tags": ["Eventos"],
                "summary": "Atualizar evento",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "requestBody": { "content": { "application/json": { "schema": { "type": "object" } } } },
                "responses": { "200": { "description": "Atualizado" } }
            },
            "patch": {
                "tags": ["Eventos"],
                "summary": "Atualizar evento (Parcial)",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "requestBody": { "content": { "application/json": { "schema": { "type": "object" } } } },
                "responses": { "200": { "description": "Atualizado" } }
            },
            "delete": {
                "tags": ["Eventos"],
                "summary": "Deletar evento",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Evento deletado" } }
            }
        },
        "/cronogramas": {
            "get": {
                "tags": ["Cronogramas"],
                "summary": "Listar cronogramas",
                "parameters": [
                    { "name": "data", "in": "query", "schema": { "type": "string" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista" } }
            },
            "post": {
                "tags": ["Cronogramas"],
                "summary": "Criar cronograma",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "requestBody": { "content": { "application/json": { "schema": { "type": "object" } } } },
                "responses": { "201": { "description": "Criado" } }
            }
        },
        "/cronogramas/{id}": {
            "get": {
                "tags": ["Cronogramas"],
                "summary": "Obter por ID",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Dados do cronograma" } }
            },
            "put": {
                "tags": ["Cronogramas"],
                "summary": "Atualizar",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "requestBody": { "content": { "application/json": { "schema": { "type": "object" } } } },
                "responses": { "200": { "description": "Atualizado" } }
            },
            "patch": {
                "tags": ["Cronogramas"],
                "summary": "Atualizar parcial",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "requestBody": { "content": { "application/json": { "schema": { "type": "object" } } } },
                "responses": { "200": { "description": "Atualizado" } }
            },
            "delete": {
                "tags": ["Cronogramas"],
                "summary": "Deletar",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Deletado" } }
            }
        },
        "/atividades": {
            "get": {
                "tags": ["Atividades"],
                "summary": "Listar atividades",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista de atividades" } }
            },
            "post": {
                "tags": ["Atividades"],
                "summary": "Criar atividade",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "requestBody": { "content": { "application/json": { "schema": { "type": "object" } } } },
                "responses": { "201": { "description": "Criada" } }
            }
        },
        "/atividades/relatorio/campo-experiencia": {
            "get": {
                "tags": ["Atividades"],
                "summary": "Relatório por campo",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Relatório" } }
            }
        },
        "/atividades/{id}": {
            "get": {
                "tags": ["Atividades"],
                "summary": "Obter atividade",
                "parameters": [
                    { "name": "id", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Dados da atividade" } }
            }
        },
        "/atividades/turma-atividades/{professorId}": {
            "get": {
                "tags": ["Atividades"],
                "summary": "Atividades de um professor",
                "parameters": [
                    { "name": "professorId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista" } }
            }
        },
        "/objetivos": {
            "get": {
                "tags": ["Objetivos"],
                "summary": "Listar objetivos",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista" } }
            },
            "post": {
                "tags": ["Objetivos"],
                "summary": "Criar objetivo",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "requestBody": { "content": { "application/json": { "schema": { "type": "object" } } } },
                "responses": { "201": { "description": "Criado" } }
            }
        },
        "/objetivos/turma/{turmaId}": {
            "get": {
                "tags": ["Objetivos"],
                "summary": "Objetivos da turma",
                "parameters": [
                    { "name": "turmaId", "in": "path", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista" } }
            }
        },
        "/objetivos/grupo-campo": {
            "get": {
                "tags": ["Objetivos"],
                "summary": "Buscar por grupo e campo",
                "parameters": [
                    { "name": "grupoId", "in": "query", "required": true, "schema": { "type": "integer" } },
                    { "name": "campoId", "in": "query", "required": true, "schema": { "type": "integer" } },
                    { "$ref": "#/components/parameters/TenantId" }
                ],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista" } }
            }
        },
        "/grupos": {
            "get": {
                "tags": ["Grupos"],
                "summary": "Listar grupos",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista" } }
            }
        },
        "/campos": {
            "get": {
                "tags": ["Campos"],
                "summary": "Listar campos de experiência",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "responses": { "200": { "description": "Lista" } }
            },
            "post": {
                "tags": ["Campos"],
                "summary": "Criar campo de experiência",
                "parameters": [{ "$ref": "#/components/parameters/TenantId" }],
                "security": [{ "bearerAuth": [] }],
                "requestBody": { "content": { "application/json": { "schema": { "type": "object" } } } },
                "responses": { "201": { "description": "Criado" } }
            }
        }
    },
    "components": {
        "parameters": {
            "TenantId": {
                "name": "x-tenant-id",
                "in": "header",
                "description": "Slug ou ID da escola (Tenant)",
                "required": true,
                "schema": { "type": "string" }
            }
        },
        "schemas": {
            "UsuarioInput": {
                "type": "object",
                "properties": {
                    "nome": { "type": "string" },
                    "email": { "type": "string" },
                    "senha": { "type": "string" },
                    "telefone": { "type": "string" },
                    "roles": { "type": "array", "items": { "type": "string", "enum": ["ADMIN", "PROFESSOR", "RESPONSAVEL"] } },
                    "schoolId": { "type": "string", "description": "Obrigatório para PLATFORM_ADMIN criando usuário" }
                },
                "required": ["nome", "email", "senha", "telefone", "roles"]
            },
            "CreateSchoolInput": {
                "type": "object",
                "properties": {
                    "name": { "type": "string", "minLength": 3, "maxLength": 255 },
                    "slug": { "type": "string", "minLength": 3, "maxLength": 50, "description": "Lowercase alphanumeric with hyphens" },
                    "legalName": { "type": "string", "maxLength": 255 },
                    "cnpj": { "type": "string", "minLength": 14, "maxLength": 14 },
                    "logoUrl": { "type": "string", "format": "uri" },
                    "primaryColor": { "type": "string", "pattern": "^#[0-9A-Fa-f]{6}$" },
                    "timezone": { "type": "string", "default": "America/Sao_Paulo" },
                    "subscriptionPlan": { "type": "string", "enum": ["BASIC", "PRO", "PREMIUM"], "default": "BASIC" },
                    "adminUser": {
                        "type": "object",
                        "properties": {
                            "nome": { "type": "string", "minLength": 3 },
                            "email": { "type": "string", "format": "email" },
                            "senha": { "type": "string", "minLength": 6 }
                        },
                        "required": ["nome", "email", "senha"]
                    }
                },
                "required": ["name", "slug", "adminUser"]
            },
            "AlunoInput": {
                "type": "object",
                "properties": {
                    "nome": { "type": "string" },
                    "dataNasc": { "type": "string", "format": "date-time" },
                    "turmaId": { "type": "integer" },
                    "isAtivo": { "type": "boolean" }
                },
                "required": ["nome", "dataNasc"]
            },
            "LoginResponse": {
                "type": "object",
                "properties": {
                    "token": { "type": "string" },
                    "id": { "type": "integer" },
                    "nome": { "type": "string" },
                    "email": { "type": "string" },
                    "roles": { "type": "array", "items": { "type": "string" } },
                    "schoolSlug": { "type": "string" }
                }
            },
            "ErrorResponse": {
                "type": "object",
                "properties": {
                    "erro": { "type": "string" },
                    "details": { "type": "string" }
                }
            }
        },
        "securitySchemes": {
            "bearerAuth": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "JWT"
            }
        }
    }
}